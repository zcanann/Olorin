import { Theme } from "../theme.slint";

import { DockRoot, DockedWindowLayoutNode } from "./../components/docking/dock_root.slint";
import { HSeparator } from "./../components/separator.slint";
import { ToolbarMenu } from "./../components/toolbar_menu/toolbar_menu.slint";

import { FooterView } from "./footer_view.slint";
import { TitleBarView } from "./title_bar_view.slint";
import { ShortcutBarView } from "./shortcut_bar_view.slint";
import { OutputView } from "output_view.slint";
import { ProcessSelectorView } from "process_selector_view.slint";

import { WindowViewModelBindings } from "./../view_model_bindings.slint";
import { ScanResultsView } from "./scan_results_view.slint";
import { PropertyViewerView } from "./property_viewer_view.slint";
import { SettingsView } from "./settings_view.slint";
import { DockedWindowView } from "./docking/docked_window_view.slint";

import { HorizontalBox } from "std-widgets.slint";

export component MainWindowView inherits Window {
    title: @tr("Squalr");
    default-font-family: "Segoe UI";
    default-font-size: 10pt;
    default-font-weight: 525;
    preferred-width: 1280px;
    resize-border-width: 4px;
    preferred-height: 840px;
    background: transparent;
    no-frame: true;
    VerticalLayout {
        title-bar := TitleBarView {
            title: @tr("Squalr");
        }

        toolbar-menu := ToolbarMenu {
            menus: [
                {
                    header: "File",
                    items:[
                        { id: "select-project", text:"Select Project" },
                        { id: "export-project", text:"Export Project as Table..." },
                        { id: "exit", text: "Exit Squalr", separator: true }
                    ]
                },
                { header: "Edit", items:[{ id: "settings", text:"Settings" }] },
                { header: "Layout", items:[{ id: "layout-reset", text:"Reset Layout" }] },
                {
                    header: "Windows",
                    items:[
                        { id: "process-selector", text:"Process Selector" },
                        { id: "project-explorer", text:"Project Explorer" },
                        { id: "property-viewer", text:"Property Viewer" },
                        { id: "memory-viewer", text:"Memory Viewer" },
                        { id: "scan-results", text:"Scan Results" },
                        { id: "pointer-results", text:"Pointer Scan Results" },
                        { id: "snapshot-manager", text:"Snapshot Manager" },
                        { id: "dotnet-explorer", text:".NET Explorer" },
                    ]
                },
                { header: "Scans", items:[{ id: "scans", text:"Pointer Scan" }] },
                {
                    header: "Debugger",
                    items:[{ id: "disassembly", text:"Disassembly" }, { id: "code-tracer", text:"Code Tracer" }]
                },
            ];
            onItemClicked(id) => {
                if id == "exit" {
                    WindowViewModelBindings.close();
                } else if id == "select-project" {
                } else if id == "export-project" {
                } else if id == "settings" {
                } else if id == "layout-reset" {
                } else if id == "process-selector" {
                } else if id == "project-explorer" {
                } else if id == "memory-viewer" {
                } else if id == "scan-results" {
                } else if id == "pointer-results" {
                } else if id == "snapshot-manager" {
                } else if id == "dotnet-explorer" {
                }
            }
        }

        shortcut-bar := ShortcutBarView { }

        dock-root := DockRoot {
            layout: [
                // All heirarchy relationships
                {
                    dock-window-id: "root",
                    size-ratio: 1.0,
                    split-orientation: "vertical",
                    children: ["settings", "split1"],
                },
                {
                    dock-window-id: "split1",
                    size-ratio: 0.65,
                    split-orientation: "horizontal",
                    children: ["scan-results", "output"],
                },
                // All leaf elements
                {
                    dock-window-id: "output",
                    size-ratio: 0.5,
                    children: [],
                },
                {
                    dock-window-id: "scan-results",
                    size-ratio: 0.5,
                    children: [],
                },
                {
                    dock-window-id: "process-selector",
                    size-ratio: 0.5,
                    children: [],
                },
                {
                    dock-window-id: "property-viewer",
                    size-ratio: 0.5,
                    children: [],
                },
                {
                    dock-window-id: "project-explorer",
                    size-ratio: 0.35,
                    children: [],
                },
                {
                    dock-window-id: "settings",
                    size-ratio: 0.65,
                    children: [],
                },
            ];
        }

        /*
        dock-root := DockRoot {
            layout: [
                {
                    dock-window-id: "root",
                    size-ratio: 1.0,
                    split-orientation: "vertical",
                    children: ["section1", "section2", "output"],
                },
                {
                    dock-window-id: "section1",
                    size-ratio: 0.2,
                    split-orientation: "vertical",
                    children: ["project-explorer", "settings"],
                },
                {
                    dock-window-id: "section2",
                    size-ratio: 0.4,
                    split-orientation: "horizontal",
                    children: ["scan-results", "property-viewer"],
                },
            ];
        }*/

        footer := FooterView { }
    }
}
